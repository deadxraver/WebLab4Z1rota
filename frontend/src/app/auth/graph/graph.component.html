<div class="app-container">
  
  
  <header class="top-bar">
    <div class="logo">–õ–∞–±–∫–∏ –õ–∞–ø–∫–∏ 4 üêæ</div>
    <div class="user-panel">
      <span class="username">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: <strong>{{ currentUser }}</strong></span>
      <button class="logout-btn" (click)="logout()">–í—ã–π—Ç–∏</button>
    </div>
  </header>

  
  <main class="main-content">
    
    
    <section class="card graph-card">
      <h2 class="card-title">–û–±–ª–∞—Å—Ç—å</h2>
      <div class="canvas-wrapper">
       
        <canvas #graphCanvas width="350" height="350" (click)="onCanvasClick($event)"></canvas>
      </div>
      <p class="hint" *ngIf="!selectedR || selectedR <= 0">
        –í—ã–±–µ—Ä–∏—Ç–µ R > 0 –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
      </p>
    </section>

    
    <section class="card form-card">
      <h2 class="card-title">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</h2>
      <form (ngSubmit)="submitForm()">
        
        
        <div class="input-group">
          <label>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ X:</label>
          <div class="btn-row">
            <button type="button" *ngFor="let val of xValues"
                    [class.selected]="selectedX === val"
                    (click)="selectedX = val">
              {{ val }}
            </button>
          </div>
        </div>

        
        <div class="input-group">
          <label for="y-val">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ Y (-5 ... 3):</label>
          <input type="text" id="y-val" 
                 [(ngModel)]="yValue" name="yInput"
                 placeholder="–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ"
                 [class.error-border]="errorMessage && errorMessage.includes('Y')">
        </div>

        
        <div class="input-group">
          <label>–†–∞–¥–∏—É—Å R:</label>
          <div class="btn-row">
            <button type="button" *ngFor="let val of rValues"
                    [class.selected]="selectedR === val"
                    (click)="onRChange(val)">
              {{ val }}
            </button>
          </div>
        </div>

        
        <div class="error-msg" *ngIf="errorMessage">
          {{ errorMessage }}
        </div>

        
        <button type="submit" class="primary-btn" [disabled]="!selectedX || !selectedR">
          –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
        </button>
      </form>
    </section>

  </main>

  
  <section class="card table-card">
    <div class="table-header">
      <h2>–ò—Å—Ç–æ—Ä–∏—è</h2>
      <button class="clear-btn" *ngIf="points.length > 0" (click)="clearPoints()">
        –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë
      </button>
    </div>

    <div class="table-responsive">
      <table>
        <thead>
          <tr>
            <th>X</th>
            <th>Y</th>
            <th>R</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–∞—Ç–∞</th>
            <th>–í—Ä–µ–º—è</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of points">
            <td>{{ p.x }}</td>
            <td>{{ p.y }}</td>
            <td>{{ p.r }}</td>
         
            <td [class.hit]="getDynamicStatus(p)" [class.miss]="!getDynamicStatus(p)">
              {{ getDynamicStatus(p) ? '–ü–æ–ø–∞–ª' : '–ü—Ä–æ–º–∞—Ö' }}
            </td>
            <td>{{ p.startTime }}</td>
            <td>{{ p.executionTime }} –º—Å</td>
          </tr>
          <tr *ngIf="points.length === 0">
            <td colspan="6" class="empty-cell">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

</div>